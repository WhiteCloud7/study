{"version":3,"file":"js/371.51459000.js","mappings":"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","sources":["webpack://blog/./src/components/article/editArticle.vue","webpack://blog/./src/components/article/editArticle.vue?92e2","webpack://blog/./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/Utils.js","webpack://blog/./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/ScriptLoader.js","webpack://blog/./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/TinyMCE.js","webpack://blog/./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/components/EditorPropTypes.js","webpack://blog/./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/components/Editor.js","webpack://blog/./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/index.js"],"sourcesContent":["<template>\r\n  <div class=\"myArticles-articleEdit\" v-loading.fullscreen.lock=\"isLoading\">\r\n    <div class=\"myArticles-editContent\">\r\n      <el-input\r\n          type=\"text\"\r\n          v-model=\"articleTitle\"\r\n          :readonly=\"isReadOnly\"\r\n          placeholder=\"请输入标题\"\r\n          :input-style=\"{ cursor: cursorType }\"\r\n      />\r\n      <Editor\r\n          api-key=\"lifs7sk02yr110bbdvq7tcxiwlnr1p29cqe9sz0j1do78teq\"\r\n          v-model=\"articleText\"\r\n          :init=\"{\r\n          height: 480,\r\n          resize:false,\r\n          menubar: false,\r\n          plugins: 'link image code lists',\r\n          toolbar: 'undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | code',\r\n          placeholder: '请输入正文内容',\r\n          branding: false,\r\n          promotion: false,\r\n          readonly: isReadOnly,\r\n        }\"\r\n      />\r\n    </div>\r\n    <div class=\"myArticles-editButtonGroup\">\r\n      <el-button class=\"myArticles-editButton\" @click=\"edit\">编辑</el-button>\r\n      <el-button class=\"myArticles-editButton\" @click=\"save\">保存</el-button>\r\n      <el-button class=\"myArticles-editButton\" @click=\"newArticle\" v-if=\"route.path.slice(route.path.lastIndexOf('/'))==='/add'\">发布</el-button>\r\n      <el-button class=\"myArticles-editButton\" @click=\"back\">返回</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {defineProps, defineEmits, ref, onMounted} from 'vue'\r\nimport axios from 'axios'\r\nimport {useRouter} from \"vue-router\";\r\nimport Editor from '@tinymce/tinymce-vue'\r\nimport axiosToken from \"@/axios\";\r\nimport {useRoute} from \"vue-router\";\r\n\r\nconst props = defineProps({\r\n  articleId: Number,\r\n})\r\nconst router = useRouter();\r\nconst articleTitle = ref()\r\nconst articleText = ref()\r\nconst isReadOnly = ref(true)\r\nconst cursorType = ref(\"default\")\r\nconst isLoading = ref(false);\r\nconst route = useRoute();\r\n\r\nfunction edit() {\r\n  isReadOnly.value = !isReadOnly.value\r\n  cursorType.value = isReadOnly.value ? \"default\" : \"text\"\r\n}\r\n\r\nfunction htmlToPlainText(html) {\r\n  // 替换 p 标签为换行，避免多段文字合并成一行\r\n  html = html.replace(/<p[^>]*>/gi, '').replace(/<\\/p>/gi, '\\r\\n');\r\n  html = html.replace(/<br\\s*\\/?>/gi, '\\r\\n');\r\n\r\n  // 创建一个 DOM 元素来解析剩余标签\r\n  const tempDiv = document.createElement(\"div\");\r\n  tempDiv.innerHTML = html;\r\n  return tempDiv.innerText;  // 自动去除剩余标签\r\n}\r\n\r\nfunction save() {\r\n  if(route.path!==\"/article/add\"){\r\n    const params = new URLSearchParams()\r\n    params.append(\"articleId\", props.articleId)\r\n    params.append(\"title\", articleTitle.value)\r\n    params.append(\"content\", htmlToPlainText(articleText.value))\r\n    axiosToken.post(\"http://localhost:8081/saveArticle\", params, {\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n      }\r\n    }).then(res => {\r\n      confirm(\"保存成功！\")\r\n      window.location.reload()\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n  }else{\r\n    const params = new URLSearchParams()\r\n    params.append(\"title\", articleTitle.value)\r\n    params.append(\"content\", htmlToPlainText(articleText.value))\r\n    axiosToken.post(\"http://localhost:8081/saveArticleToDraft\", params, {\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n      }\r\n    }).then(res => {\r\n      confirm(\"保存成功！\")\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n  }\r\n}\r\n\r\nfunction newArticle(){\r\n  const params = new URLSearchParams()\r\n  params.append(\"title\", articleTitle.value)\r\n  params.append(\"content\", htmlToPlainText(articleText.value))\r\n  axiosToken.post(\"http://localhost:8081/newArticle\", params, {\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n    }\r\n  }).then(res => {\r\n    confirm(\"发布成功！\")\r\n    router.push(\"/article\")\r\n  }).catch(err => {\r\n    console.error(err)\r\n  })\r\n}\r\n\r\nfunction initCurrentArticle() {\r\n  if(route.path!==\"/article/add\"){\r\n    axiosToken.get(\"http://localhost:8081/initCurrentArticle\", {\r\n      params: { articleId: props.articleId },\r\n      responseType: \"json\"\r\n    }).then(res => {\r\n      const data = res.data.data;\r\n      articleTitle.value = data.title;\r\n      articleText.value = articleText.value === \"undefined\"?\"\":\r\n          data.articleContent\r\n          .replace(/\\r\\n/g, '<br>')\r\n          .replace(/\\n/g, '<br>');\r\n    }).catch(err => {\r\n      console.log(err);\r\n    });\r\n  }else {\r\n    initDraft();\r\n  }\r\n}\r\n\r\nfunction initDraft(){\r\n  axiosToken.get(\"http://localhost:8081/articleDraft\").then(res=>{\r\n    const data = res.data.data;\r\n    articleTitle.value = data.title===\"undefined\"?\"\":data.title;\r\n    articleText.value = data.articleContent===undefined?\"\":data.articleContent;\r\n  }).catch(console.log)\r\n}\r\n\r\nfunction loading(){\r\n  isLoading.value = true;\r\n  setTimeout(()=>{\r\n    isLoading.value = false;\r\n  },1000);\r\n}\r\nfunction back() {\r\n  router.push(\"/article\");\r\n}\r\n\r\nonMounted(()=>{\r\n  initCurrentArticle();\r\n  loading();\r\n})\r\n</script>\r\n\r\n<style>\r\n.myArticles-articleEdit {\r\n  display: flex;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 600;\r\n  background-color: rgba(255, 255, 255, 0.8);\r\n  flex-direction: column;\r\n}\r\n\r\n.myArticles-editContent {\r\n  padding: 16px;\r\n  width: 100%;\r\n  min-height: 90%;\r\n  background-color: rgb(216.8, 235.6, 255);\r\n  box-shadow: var(--el-box-shadow);\r\n}\r\n\r\n.myArticles-editContent textarea {\r\n  height: 400px !important;\r\n  resize: none !important;\r\n}\r\n\r\n.myArticles-editButtonGroup {\r\n  background-color: rgba(255, 255, 255, 0.65);\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 30px;\r\n  width: 100%;\r\n  height: 10%;\r\n}\r\n\r\n.myArticles-editButton {\r\n  width: 10%;\r\n  margin-top: 1%;\r\n  margin-left: 40px;\r\n}\r\n</style>\r\n","import script from \"./editArticle.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./editArticle.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./editArticle.vue?vue&type=style&index=0&id=2ba50514&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { watch } from 'vue';\nvar validEvents = [\n    'onActivate',\n    'onAddUndo',\n    'onBeforeAddUndo',\n    'onBeforeExecCommand',\n    'onBeforeGetContent',\n    'onBeforeRenderUI',\n    'onBeforeSetContent',\n    'onBeforePaste',\n    'onBlur',\n    'onChange',\n    'onClearUndos',\n    'onClick',\n    'onContextMenu',\n    'onCommentChange',\n    'onCompositionEnd',\n    'onCompositionStart',\n    'onCompositionUpdate',\n    'onCopy',\n    'onCut',\n    'onDblclick',\n    'onDeactivate',\n    'onDirty',\n    'onDrag',\n    'onDragDrop',\n    'onDragEnd',\n    'onDragGesture',\n    'onDragOver',\n    'onDrop',\n    'onExecCommand',\n    'onFocus',\n    'onFocusIn',\n    'onFocusOut',\n    'onGetContent',\n    'onHide',\n    'onInit',\n    'onInput',\n    'onKeyDown',\n    'onKeyPress',\n    'onKeyUp',\n    'onLoadContent',\n    'onMouseDown',\n    'onMouseEnter',\n    'onMouseLeave',\n    'onMouseMove',\n    'onMouseOut',\n    'onMouseOver',\n    'onMouseUp',\n    'onNodeChange',\n    'onObjectResizeStart',\n    'onObjectResized',\n    'onObjectSelected',\n    'onPaste',\n    'onPostProcess',\n    'onPostRender',\n    'onPreProcess',\n    'onProgressState',\n    'onRedo',\n    'onRemove',\n    'onReset',\n    'onSaveContent',\n    'onSelectionChange',\n    'onSetAttrib',\n    'onSetContent',\n    'onShow',\n    'onSubmit',\n    'onUndo',\n    'onVisualAid'\n];\nvar isValidKey = function (key) {\n    return validEvents.map(function (event) { return event.toLowerCase(); }).indexOf(key.toLowerCase()) !== -1;\n};\nvar bindHandlers = function (initEvent, listeners, editor) {\n    Object.keys(listeners)\n        .filter(isValidKey)\n        .forEach(function (key) {\n        var handler = listeners[key];\n        if (typeof handler === 'function') {\n            if (key === 'onInit') {\n                handler(initEvent, editor);\n            }\n            else {\n                editor.on(key.substring(2), function (e) { return handler(e, editor); });\n            }\n        }\n    });\n};\nvar bindModelHandlers = function (props, ctx, editor, modelValue) {\n    var modelEvents = props.modelEvents ? props.modelEvents : null;\n    var normalizedEvents = Array.isArray(modelEvents) ? modelEvents.join(' ') : modelEvents;\n    watch(modelValue, function (val, prevVal) {\n        if (editor && typeof val === 'string' && val !== prevVal && val !== editor.getContent({ format: props.outputFormat })) {\n            editor.setContent(val);\n        }\n    });\n    editor.on(normalizedEvents ? normalizedEvents : 'change input undo redo', function () {\n        ctx.emit('update:modelValue', editor.getContent({ format: props.outputFormat }));\n    });\n};\nvar initEditor = function (initEvent, props, ctx, editor, modelValue, content) {\n    editor.setContent(content());\n    if (ctx.attrs['onUpdate:modelValue']) {\n        bindModelHandlers(props, ctx, editor, modelValue);\n    }\n    bindHandlers(initEvent, ctx.attrs, editor);\n};\nvar unique = 0;\nvar uuid = function (prefix) {\n    var time = Date.now();\n    var random = Math.floor(Math.random() * 1000000000);\n    unique++;\n    return prefix + '_' + random + unique + String(time);\n};\nvar isTextarea = function (element) {\n    return element !== null && element.tagName.toLowerCase() === 'textarea';\n};\nvar normalizePluginArray = function (plugins) {\n    if (typeof plugins === 'undefined' || plugins === '') {\n        return [];\n    }\n    return Array.isArray(plugins) ? plugins : plugins.split(' ');\n};\nvar mergePlugins = function (initPlugins, inputPlugins) {\n    return normalizePluginArray(initPlugins).concat(normalizePluginArray(inputPlugins));\n};\nvar isNullOrUndefined = function (value) {\n    return value === null || value === undefined;\n};\nexport { bindHandlers, bindModelHandlers, initEditor, isValidKey, uuid, isTextarea, mergePlugins, isNullOrUndefined };\n","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { uuid } from './Utils';\nvar createState = function () { return ({\n    listeners: [],\n    scriptId: uuid('tiny-script'),\n    scriptLoaded: false\n}); };\nvar CreateScriptLoader = function () {\n    var state = createState();\n    var injectScriptTag = function (scriptId, doc, url, callback) {\n        var scriptTag = doc.createElement('script');\n        scriptTag.referrerPolicy = 'origin';\n        scriptTag.type = 'application/javascript';\n        scriptTag.id = scriptId;\n        scriptTag.src = url;\n        var handler = function () {\n            scriptTag.removeEventListener('load', handler);\n            callback();\n        };\n        scriptTag.addEventListener('load', handler);\n        if (doc.head) {\n            doc.head.appendChild(scriptTag);\n        }\n    };\n    var load = function (doc, url, callback) {\n        if (state.scriptLoaded) {\n            callback();\n        }\n        else {\n            state.listeners.push(callback);\n            if (!doc.getElementById(state.scriptId)) {\n                injectScriptTag(state.scriptId, doc, url, function () {\n                    state.listeners.forEach(function (fn) { return fn(); });\n                    state.scriptLoaded = true;\n                });\n            }\n        }\n    };\n    // Only to be used by tests.\n    var reinitialize = function () {\n        state = createState();\n    };\n    return {\n        load: load,\n        reinitialize: reinitialize\n    };\n};\nvar ScriptLoader = CreateScriptLoader();\nexport { ScriptLoader };\n","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nvar getGlobal = function () { return (typeof window !== 'undefined' ? window : global); };\nvar getTinymce = function () {\n    var global = getGlobal();\n    return global && global.tinymce ? global.tinymce : null;\n};\nexport { getTinymce };\n","export var editorProps = {\n    apiKey: String,\n    licenseKey: String,\n    cloudChannel: String,\n    id: String,\n    init: Object,\n    initialValue: String,\n    inline: Boolean,\n    modelEvents: [String, Array],\n    plugins: [String, Array],\n    tagName: String,\n    toolbar: [String, Array],\n    modelValue: String,\n    disabled: Boolean,\n    tinymceScriptSrc: String,\n    outputFormat: {\n        type: String,\n        validator: function (prop) { return prop === 'html' || prop === 'text'; }\n    },\n};\n","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { ScriptLoader } from '../ScriptLoader';\nimport { getTinymce } from '../TinyMCE';\nimport { isTextarea, mergePlugins, uuid, isNullOrUndefined, initEditor } from '../Utils';\nimport { editorProps } from './EditorPropTypes';\nimport { h, defineComponent, onMounted, ref, toRefs, nextTick, watch, onBeforeUnmount, onActivated, onDeactivated } from 'vue';\nvar renderInline = function (ce, id, elementRef, tagName) {\n    return ce(tagName ? tagName : 'div', {\n        id: id,\n        ref: elementRef\n    });\n};\nvar renderIframe = function (ce, id, elementRef) {\n    return ce('textarea', {\n        id: id,\n        visibility: 'hidden',\n        ref: elementRef\n    });\n};\nvar defaultInitValues = { selector: undefined, target: undefined };\nexport var Editor = defineComponent({\n    props: editorProps,\n    setup: function (props, ctx) {\n        var conf = props.init ? __assign(__assign({}, props.init), defaultInitValues) : __assign({}, defaultInitValues);\n        var _a = toRefs(props), disabled = _a.disabled, modelValue = _a.modelValue, tagName = _a.tagName;\n        var element = ref(null);\n        var vueEditor = null;\n        var elementId = props.id || uuid('tiny-vue');\n        var inlineEditor = (props.init && props.init.inline) || props.inline;\n        var modelBind = !!ctx.attrs['onUpdate:modelValue'];\n        var mounting = true;\n        var initialValue = props.initialValue ? props.initialValue : '';\n        var cache = '';\n        var getContent = function (isMounting) { return modelBind ?\n            function () { return ((modelValue === null || modelValue === void 0 ? void 0 : modelValue.value) ? modelValue.value : ''); } :\n            function () { return isMounting ? initialValue : cache; }; };\n        var initWrapper = function () {\n            var content = getContent(mounting);\n            var finalInit = __assign(__assign({}, conf), { readonly: props.disabled, target: element.value, plugins: mergePlugins(conf.plugins, props.plugins), toolbar: props.toolbar || (conf.toolbar), inline: inlineEditor, license_key: props.licenseKey, setup: function (editor) {\n                    vueEditor = editor;\n                    editor.on('init', function (e) { return initEditor(e, props, ctx, editor, modelValue, content); });\n                    if (typeof conf.setup === 'function') {\n                        conf.setup(editor);\n                    }\n                } });\n            if (isTextarea(element.value)) {\n                element.value.style.visibility = '';\n            }\n            getTinymce().init(finalInit);\n            mounting = false;\n        };\n        watch(disabled, function (disable) {\n            var _a;\n            if (vueEditor !== null) {\n                if (typeof ((_a = vueEditor.mode) === null || _a === void 0 ? void 0 : _a.set) === 'function') {\n                    vueEditor.mode.set(disable ? 'readonly' : 'design');\n                }\n                else {\n                    vueEditor.setMode(disable ? 'readonly' : 'design');\n                }\n            }\n        });\n        watch(tagName, function (_) {\n            var _a;\n            if (!modelBind) {\n                cache = vueEditor.getContent();\n            }\n            (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.remove(vueEditor);\n            nextTick(function () { return initWrapper(); });\n        });\n        onMounted(function () {\n            if (getTinymce() !== null) {\n                initWrapper();\n            }\n            else if (element.value && element.value.ownerDocument) {\n                var channel = props.cloudChannel ? props.cloudChannel : '7';\n                var apiKey = props.apiKey ? props.apiKey : 'no-api-key';\n                var scriptSrc = isNullOrUndefined(props.tinymceScriptSrc) ?\n                    \"https://cdn.tiny.cloud/1/\".concat(apiKey, \"/tinymce/\").concat(channel, \"/tinymce.min.js\") :\n                    props.tinymceScriptSrc;\n                ScriptLoader.load(element.value.ownerDocument, scriptSrc, initWrapper);\n            }\n        });\n        onBeforeUnmount(function () {\n            if (getTinymce() !== null) {\n                getTinymce().remove(vueEditor);\n            }\n        });\n        if (!inlineEditor) {\n            onActivated(function () {\n                if (!mounting) {\n                    initWrapper();\n                }\n            });\n            onDeactivated(function () {\n                var _a;\n                if (!modelBind) {\n                    cache = vueEditor.getContent();\n                }\n                (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.remove(vueEditor);\n            });\n        }\n        var rerender = function (init) {\n            var _a;\n            cache = vueEditor.getContent();\n            (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.remove(vueEditor);\n            conf = __assign(__assign(__assign({}, conf), init), defaultInitValues);\n            nextTick(function () { return initWrapper(); });\n        };\n        ctx.expose({\n            rerender: rerender,\n            getEditor: function () { return vueEditor; }\n        });\n        return function () { return inlineEditor ?\n            renderInline(h, elementId, element, props.tagName) :\n            renderIframe(h, elementId, element); };\n    }\n});\n","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { Editor } from './components/Editor';\nexport default Editor;\n"],"names":["props","__props","router","useRouter","articleTitle","ref","articleText","isReadOnly","cursorType","isLoading","route","useRoute","edit","value","htmlToPlainText","html","replace","tempDiv","document","createElement","innerHTML","innerText","save","path","params","URLSearchParams","append","articleId","axiosToken","post","headers","then","res","confirm","window","location","reload","catch","err","console","error","newArticle","push","initCurrentArticle","get","responseType","data","title","articleContent","log","initDraft","undefined","loading","setTimeout","back","onMounted","__exports__","validEvents","isValidKey","key","map","event","toLowerCase","indexOf","bindHandlers","initEvent","listeners","editor","Object","keys","filter","forEach","handler","on","substring","e","bindModelHandlers","ctx","modelValue","modelEvents","normalizedEvents","Array","isArray","join","watch","val","prevVal","getContent","format","outputFormat","setContent","emit","initEditor","content","attrs","unique","uuid","prefix","time","Date","now","random","Math","floor","String","isTextarea","element","tagName","normalizePluginArray","plugins","split","mergePlugins","initPlugins","inputPlugins","concat","isNullOrUndefined","createState","scriptId","scriptLoaded","CreateScriptLoader","state","injectScriptTag","doc","url","callback","scriptTag","referrerPolicy","type","id","src","removeEventListener","addEventListener","head","appendChild","load","getElementById","fn","reinitialize","ScriptLoader","getGlobal","global","getTinymce","tinymce","editorProps","apiKey","licenseKey","cloudChannel","init","initialValue","inline","Boolean","toolbar","disabled","tinymceScriptSrc","validator","prop","__assign","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","renderInline","ce","elementRef","renderIframe","visibility","defaultInitValues","selector","target","Editor","defineComponent","setup","conf","_a","toRefs","vueEditor","elementId","inlineEditor","modelBind","mounting","cache","isMounting","initWrapper","finalInit","readonly","license_key","style","disable","mode","set","setMode","_","remove","nextTick","ownerDocument","channel","scriptSrc","onBeforeUnmount","onActivated","onDeactivated","rerender","expose","getEditor","h"],"sourceRoot":""}